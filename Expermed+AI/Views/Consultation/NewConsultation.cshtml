@using Microsoft.AspNetCore.Http
@{
    ViewBag.Title = "New Consultation";
    ViewBag.pTitle = "New Consultation";
    ViewBag.pageTitle = "New Consultation";
    Layout = null;
    var usuarioId = ViewContext.HttpContext.Session.GetInt32("UsuarioId");

}
@model NewPatientViewModel

 <!doctype html>
 <html lang="en" data-layout="vertical" data-topbar="light" data-sidebar="light" data-sidebar-size="lg" data-sidebar-image="none" data-preloader="disable">
 <head>
    @await Html.PartialAsync("_title_meta")
    @await Html.PartialAsync("_head_css")
 </head>
 <body>

   <!-- Begin page -->
   <div id="layout-wrapper">
        @await Html.PartialAsync("_menu")

       <!-- ============================================================== -->
       <!-- Start right Content here -->
       <!-- ============================================================== -->
           <div class="main-content">
                            <div class="page-content">
                                <div class="container-fluid">
                                    <div class="position-relative mx-n4 mt-n4">
                                        <div class="profile-wid-bg profile-setting-img">
                                            <img src="~/assets/images/auth-one-bg.jpg" class="profile-wid-img" alt="">
                                            <div class="overlay-content">
                                                <div class="text-end p-3">
                                                    <div class="p-0 ms-auto rounded-circle profile-photo-edit">
                                                        <input id="profile-foreground-img-file-input" type="file" class="profile-foreground-img-file-input">
                                                          <h1 class="cabeceras"> <i class=" ri-survey-fill"></i>NEW CONSULTATION</h1>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>





    <div class="col-xxl-9">
        <div class="card">
            <div class="card-body">
                <form action="#" class="form-steps" autocomplete="off">

                    <div class="step-arrow-nav mb-4">

                        <ul class="nav nav-pills custom-nav nav-justified" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="steparrow-gen-info-tab" data-bs-toggle="pill" data-bs-target="#steparrow-gen-info" type="button" role="tab" aria-controls="steparrow-gen-info" aria-selected="true">Patient data</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link " id="steparrow-description-info-tab" data-bs-toggle="pill" data-bs-target="#steparrow-description-info" type="button" role="tab" aria-controls="steparrow-description-info" aria-selected="false">Consultation Data</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="pills-experience-tab" data-bs-toggle="pill" data-bs-target="#pills-experience" type="button" role="tab" aria-controls="pills-experience" aria-selected="false">Vital Signs</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="pills-experience-tab" data-bs-toggle="pill" data-bs-target="#pills-experience" type="button" role="tab" aria-controls="pills-experience" aria-selected="false">Diagnostic</button>
                            </li>
                        </ul>
                    </div>

                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="steparrow-gen-info" role="tabpanel" aria-labelledby="steparrow-gen-info-tab">
                            <div>
                                <div class="row">
                                    <div class="divider-with-text">
                                       <i class="ri-user-fill" id="icons"></i>  <span> Personal Data </span>
                                    </div>
                                    <div class="col-lg-3">
                                        <div class="mb-3">
                                            <label class="form-label" for="firstName">First Last Name</label>
                                            <input type="text" class="form-control" id="firstlastnameInput" name="PatientFirstsurname" disabled>
                                       </div>
                                    </div>

                                    <div class="col-lg-3">
                                         <div class="mb-3">
                                             <label for="documentNumberInput" class="form-label">Second Last Name</label>
                                             <input type="text" class="form-control" id="Input" name="PatientSecondlastname" disabled>
                                         </div>
                                    </div>
                                    
                                    <div class="col-lg-3">
                                       <div class="mb-3">
                                           <label for="documentNumberInput" class="form-label">First Name</label>
                                           <input type="text" class="form-control" id="firstnameInput" name="PatientFirstname"  disabled>
                                       </div>
                                    </div>

                                    <div class="col-lg-3">
                                       <div class="mb-3">
                                           <label for="documentNumberInput" class="form-label">Middle Name</label>
                                           <input type="text" class="form-control" id="Input" name="PatientMiddlename" disabled>
                                       </div>
                                    </div>

                                    <div class="col-lg-3">
                                       <div class="mb-3">
                                       <label for="specialtySelect" class="form-label">Select Document Type *</label>
                                       <select class="form-control" id="documenttyoeId" name="PatientDocumenttype" data-choices data-choices-sorting-false disabled>
                                                                    @foreach (var documenttype in Model.DocumentTypes)
                                                                    {
                                                       <option value="@documenttype.CatalogId">@documenttype.CatalogName</option>
                                                                    }
                                       </select>

                                       </div>
                                    </div>

                                    <div class="col-lg-3">
                                          <div class="mb-3">
                                              <label for="lastnameInput" class="form-label">Document Number *</label>
                                              <input type="text" class="form-control" id="documentnumber" name="PatientDocumentnumber" disabled>
                                                 
                                          </div>
                                    </div>

                                    <div class="col-lg-3">
                                        <div class="mb-3">
                                        <label for="specialtySelect" class="form-label">Select Blood Type</label>
                                        <select class="form-control" id="bloodtype" name="PatientBloodtype" data-choices data-choices-sorting-false disabled>
                                            @foreach (var bloodtype in Model.BloodTypes)    
                                            {
                                                    <option value="@bloodtype.CatalogId">@bloodtype.CatalogName</option>
                                            }
                                        </select>
                                    
                                        </div>
                                     </div>

                                     <div class="col-lg-2">
                                        <div class="mb-3">
                                        <label for="specialtySelect" class="form-label">He is donor? </label>
                                        <select class="form-control" id="documenttyoeId" name="PatientDonor" data-choices data-choices-sorting-false disabled >
                                                      <option value="Yes">Yes</option>
                                                      <option value="No">No</option>
                                        </select>
                                     
                                        </div>
                                     </div>

                                     <div class="col-lg-3">
                                           <div class="mb-3">
                                               <label for="lastnameInput" class="form-label">Date of Birthdate *</label>
                                               <input type="date" class="form-control" id="birhdate"  name="PatientBirthdate" disabled>
                                                 
                                           </div>
                                     </div>

                                     <div class="col-lg-2">
                                           <div class="mb-3">
                                               <label for="lastnameInput" class="form-label">Age</label>
                                               <input type="number" class="form-control" id="agePatient"  name="PatientAge" disabled>
                                                 
                                           </div>
                                     </div>

                                      <div class="col-lg-3">
                                        <div class="mb-3">
                                        <label for="specialtySelect" class="form-label">Select Marital Status</label>
                                        <select class="form-control" id="maritalStatus" name="PatientMaritalstatus" data-choices data-choices-sorting-false disabled>
                                            @foreach (var maritalStatus in Model.CivilTypes)    
                                            {
                                                        <option value="@maritalStatus.CatalogId">@maritalStatus.CatalogName</option>
                                            }
                                        </select>
                                     
                                        </div>
                                     </div>

                                     <div class="col-lg-3">
                                       <div class="mb-3">
                                       <label for="specialtySelect" class="form-label">Select Professional training</label>
                                       <select class="form-control" id="vocationalTraining" name="PatientVocationalTraining" data-choices data-choices-sorting-false disabled>
                                           @foreach (var professionaltraining in Model.ProfessionalTrainingTypes)    
                                           {
                                                       <option value="@professionaltraining.CatalogId">@professionaltraining.CatalogName</option>
                                           }
                                       </select>
                                     
                                       </div>
                                     </div>

                                     <div class="divider-with-text">
                                        <i class="ri-contacts-book-2-fill" id="icons"></i>  <span> Contact Data </span>
                                     </div>
                                     
                                      <div class="col-lg-3">
                                        <div class="mb-3">
                                        <label for="specialtySelect" class="form-label">Select your Nationality</label>
                                        <select class="form-control" id="nationalitytypeId" name="PatientNationality" data-choices data-choices-sorting-false disabled>
                                            @foreach (var nacionality in Model.Countries)    
                                            {
                                                        <option value="@nacionality.CountryId">@nacionality.CountryNationality</option>
                                            }
                                        </select>
                                     
                                        </div>
                                     </div>

                                     <div class="col-lg-4">
                                        <div class="mb-3">
                                        <label for="specialtySelect" class="form-label">Select your Province</label>
                                        <select class="form-control" id="provincetypeId" name="PatientProvince" data-choices data-choices-sorting-false disabled>
                                            @foreach (var provinces in Model.Provinces)    
                                            {
                                                        <option value="@provinces.ProvinceId">@provinces.ProvinceName</option>
                                            }
                                        </select>
                                     
                                        </div>
                                     </div>

                                     <div class="col-lg-12">
                                        <div class="mb-3">
                                            <label for="addressInput" class="form-label">Address</label>
                                            <div class="input-group">
                                                <!-- Input para ingresar la dirección -->
                                                <input type="text" id="addressInput" class="form-control" name="PatientAddress" aria-label="Recipient's username" aria-describedby="button-addon2" placeholder="Write your address" disabled

                                                <!-- Botón para mostrar el mapa -->
                                                <button class="btn btn-outline-success" type="button" id="mapButton" disabled><i class="ri-map-pin-line"></i></button>
                                            </div>
                                     
                                            <!-- Contenedor para el mapa que se generará dinámicamente -->
                                            <div id="map" style="display: none; height: 400px; margin-top: 15px;"></div>
                                     
                                            <!-- Contenedor de sugerencias que se generará dinámicamente -->
                                            <div id="suggestions" class="suggestions-container" style="display: none;"></div>
                                        </div>
                                     </div>

                                      <div class="col-lg-4">
                                          <div class="mb-3">
                                              <label for="codeSenecytInput" class="form-label">Landline Phone Number</label>
                                              <input type="text" class="form-control" id="landlinetInput" name="PatientLandlinePhone" placeholder="Enter your landline phone number" disabled>
                                            
                                          </div>
                                      </div>

                                      <div class="col-lg-4">
                                          <div class="mb-3">
                                              <label for="phonenumberInput" class="form-label">Cellular Phone Number</label>
                                              <input type="text" class="form-control" id="phonenumberInput" name="PatientCellularPhone" placeholder="Enter your phone number +(1) 987 6543" disabled>
                                           </div>
                                      </div>

                                      <div class="col-lg-4">
                                          <div class="mb-3">
                                              <label for="emailInput" class="form-label">Email Address</label>
                                              <input type="email" class="form-control" id="steparrow-gen-info-email-input" name="PatientEmail" >
                                          </div>
                                      </div>

                                      <div class="col-lg-4">
                                          <div class="mb-3">
                                              <label for="phonenumberInput" class="form-label">Ocupation</label>
                                              <input type="text" class="form-control" id="phonenumberInput" name="PatientOcupation" placeholder="Enter your Ocupation" disabled>
                                          
                                          </div>
                                      </div>

                                      <div class="col-lg-4">
                                          <div class="mb-3">
                                              <label for="phonenumberInput" class="form-label">Company</label>
                                              <input type="text" class="form-control" id="phonenumberInput" name="PatientCompany" placeholder="Enter your company" disabled>
                                          
                                          </div>
                                      </div>

                                       <div class="col-lg-3">
                                          <div class="mb-3">
                                          <label for="specialtySelect" class="form-label">Select your health insurance</label>
                                          <select class="form-control" id="healtInsurancetyoeId" name="PatientHealthInsurance" data-choices data-choices-sorting-false disabled>
                                              @foreach (var healtinsurance in Model.SureHealthTypes)    
                                              {
                                                      <option value="@healtinsurance.CatalogId">@healtinsurance.CatalogName</option>
                                              }
                                          </select>
                              
                                          </div>
                                       </div>

                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label class="form-label" for="steparrow-gen-info-username-input">History Clinic</label>
                                            <input type="text" class="form-control" id="historyClinic" placeholder="Enter History Clinic" required>
                                            <div class="invalid-feedback">Please enter a History Clinic</div>
                                        </div>
                                    </div>
                                </div>
                               
                            </div>
                            <div class="d-flex align-items-start gap-3 mt-4">
                                <button type="button" class="btn btn-success btn-label right ms-auto nexttab nexttab" data-nexttab="steparrow-description-info-tab"><i class="ri-arrow-right-line label-icon align-middle fs-16 ms-2"></i>Go to more info</button>
                            </div>
                        </div>
                        <!-- end tab pane -->

                        <div class="tab-pane fade" id="steparrow-description-info" role="tabpanel" aria-labelledby="steparrow-description-info-tab">
                            <div>
                                <div class="mb-3">
                                    <label for="formFile" class="form-label">Upload Image</label>
                                    <input class="form-control" type="file" id="formFile" />
                                </div>
                                <div>
                                    <label class="form-label" for="des-info-description-input">Description</label>
                                    <textarea class="form-control" placeholder="Enter Description" id="des-info-description-input" rows="3" required></textarea>
                                    <div class="invalid-feedback">Please enter a description</div>
                                </div>
                            </div>
                            <div class="d-flex align-items-start gap-3 mt-4">
                                <button type="button" class="btn btn-light btn-label previestab" data-previous="steparrow-gen-info-tab"><i class="ri-arrow-left-line label-icon align-middle fs-16 me-2"></i> Back to General</button>
                                <button type="button" class="btn btn-success btn-label right ms-auto nexttab nexttab" data-nexttab="pills-experience-tab"><i class="ri-arrow-right-line label-icon align-middle fs-16 ms-2"></i>Submit</button>
                            </div>
                        </div>
                        <!-- end tab pane -->

                        <div class="tab-pane fade" id="pills-experience" role="tabpanel">
                            <div class="text-center">

                                <div class="avatar-md mt-5 mb-4 mx-auto">
                                    <div class="avatar-title bg-light text-success display-4 rounded-circle">
                                        <i class="ri-checkbox-circle-fill"></i>
                                    </div>
                                </div>
                                <h5>Well Done !</h5>
                                <p class="text-muted">You have Successfully Signed Up</p>
                            </div>
                        </div>
                        <!-- end tab pane -->

                                                <div class="tab-pane fade" id="pills-experience" role="tabpanel">
                            <div class="text-center">

                                <div class="avatar-md mt-5 mb-4 mx-auto">
                                    <div class="avatar-title bg-light text-success display-4 rounded-circle">
                                        <i class="ri-checkbox-circle-fill"></i>
                                    </div>
                                </div>
                                <h5>Well Done !</h5>
                                <p class="text-muted">You have Successfully Signed Up</p>
                            </div>
                        </div>
                    </div>
                    <!-- end tab content -->
                </form>
            </div>
            <!-- end card body -->
        </div>
        <!-- end card -->
                             <!--end tab-pane-->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--end col-->
                    </div>
                    <!--end row-->
                </div>
            </div>
    @await Html.PartialAsync("_footer")
    </div>
    <!-- END layout-wrapper -->
    @*     @await Html.PartialAsync("_customizer") *@
    @await Html.PartialAsync("_vendor_scripts")

<script>
    document.getElementById('birhdate').addEventListener('input', function() {
        const birthDate = new Date(this.value);
        const today = new Date();

        // Calculate age
        let age = today.getFullYear() - birthDate.getFullYear();
        const month = today.getMonth() - birthDate.getMonth();

        // Adjust age if the birth month hasn't occurred yet this year or if it's before today
        if (month < 0 || (month === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }

        // Set the age value
        document.getElementById('agePatient').value = age;
    });
</script>

    <!-- profile-setting init js -->
    <script src="~/assets/js/pages/profile-setting.init.js"></script>

    <!-- App js -->
    <script src="~/assets/js/app.js"></script>

</body>
</html>
